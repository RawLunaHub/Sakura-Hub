local a=game:GetService("Players")local b=a.LocalPlayer;local c=b:GetMouse()local d=game:GetService("Workspace").CurrentCamera;function notBehindWall(e)local f=Ray.new(b.Character.Head.Position,(e.Position-b.Character.Head.Position).Unit*300)local g,h=game:GetService("Workspace"):FindPartOnRayWithIgnoreList(f,{b.Character},false,true)if g then local i=g.Parent:FindFirstChildOfClass("Humanoid")if not i then i=g.Parent.Parent:FindFirstChildOfClass("Humanoid")end;if i and e and i.Parent==e.Parent then local j,k=d:WorldToScreenPoint(e.Position)if k then return true end end end end;function getPlayerClosestToMouse()local e=nil;local l=math.huge;for m,n in pairs(a:GetPlayers())do if n.Character then if n.Character:FindFirstChild("Humanoid")and n.Character.Humanoid.Health~=0 and n.Character:FindFirstChild("HumanoidRootPart")and n.TeamColor~=b.TeamColor then local j,o=d:WorldToViewportPoint(n.Character.HumanoidRootPart.Position)local p=(Vector2.new(c.X,c.Y)-Vector2.new(j.X,j.Y)).magnitude;if p<l and o then local q=d:WorldToViewportPoint(n.Character.HumanoidRootPart.Position)local r=(Vector2.new(c.X,c.Y)-Vector2.new(q.X,q.Y)).magnitude;local s=d:WorldToViewportPoint(n.Character.Head.Position)local t=(Vector2.new(c.X,c.Y)-Vector2.new(s.X,s.Y)).magnitude;if r>t then if notBehindWall(n.Character.Head)then e=n.Character.Head end else if notBehindWall(n.Character.HumanoidRootPart)then e=n.Character.HumanoidRootPart end end;l=p end end end end;return e end;local u=getrawmetatable(game)setreadonly(u,false)local v=u.__namecall;u.__namecall=newcclosure(function(self,...)local w={...}local x=getnamecallmethod()if tostring(self)=="HitPart"and tostring(x)=="FireServer"then w[1]=getPlayerClosestToMouse()w[2]=getPlayerClosestToMouse().Position;return self.FireServer(self,unpack(w))end;return v(self,...)end)